---
title: "同步时序电路分析"
date: 2022-01-03T15:50:36+08:00
katex : true
draft: false
---
本文尝试讲解同步时序电路分析题（我的课程考试很有可能是最后一道大题）

因为是面向做题面向考试，所以不会过多涉及具体原理

下面由这道题引入：

<img src="https://cdn.jsdelivr.net/gh/ZDaneel/cloudimg@main/img/202201031530560.png" alt="截屏2022-01-03 下午3.30.07" style="zoom:50%;" />



当看到这个图片，你很有可能是跟看天书一样，发出一句“这啥呀”的感叹。不急，我将讲慢慢展开讲解

## 一、图里都有些啥？

首先，简化一下这个电路图。

1、看到$CLK$或$CP$这两个符号，就当作其对应的线路不存在。**注意：这不是输入！！不用去管！**

2、$FF_{3}$，也就是最右边一个触发器里面有个方框，写着&，表示这是一个与门

简化成下图所示：

<img src="https://cdn.jsdelivr.net/gh/ZDaneel/cloudimg@main/img/202201031641627.png" alt="截屏2022-01-03 下午4.41.16" style="zoom:50%;" />

<center>图1 简化电路图</center>

### 1、输入输出变量

在图1中，输入是字母$X$，输出是字母$Y$。上图中找不到$X$，所以没有输入，只有一个输出$Y$

补充概念：

- 摩尔型时序电路：输出与输入不直接相关
- 米利型时序电路：输出与输入直接相关

因为图1没有输入，所以这是一个摩尔型时序电路

### 2、触发器

$FF_{1}$、$FF_{2}$、$FF_{3}$就是电路的核心部分——JK触发器

<img src="https://cdn.jsdelivr.net/gh/ZDaneel/cloudimg@main/img/202201031714542.png" alt="截屏2022-01-03 下午5.14.45" style="zoom:50%;" />

<center>图2 JK触发器</center>

关于触发器具体是什么，不是在这里就能说清楚的，文章最后会整理几类常见的触发器

首先记住：**左边是输入，右边是输出**。可以忽略左边中间的三角形（这是时钟输入，对做题没有影响）

对应到图2中，$J$和$K$就是输入变量，$Q$和$\overline{Q}$是输出变量

$\overline{Q}$上面有条横线，代表对$Q$的取反。即，如果$Q$是0，那么$\overline{Q}$就是1

### 3、状态变量

图1中可以看到$Q$后面紧跟了$Q_{1}$、$Q_{2}$、$Q_{3}$三个字母，称为状态变量

## 二、知道有啥了，然后呢？

### 1、特性方程

触发器有一个特性方程，是用来描述输入输出关系的，常见触发器的特性方程会在文章最后给出

图2中的JK触发器，对应的特性方程是：
$$
Q^{*}=J\bar{Q}+\bar{K}Q
$$

- $Q^{*}$指的是触发器的次态
- $Q$是触发器的现态，现态就是$Q_{1}$、$Q_{2}$、$Q_{3}$，这个是已知的

*ps.我用的表达方式和书上是一致的，与老师给出的答案不一致，但本质是一样的*

看不懂也不要紧，我们要做的是确定每一个触发器$J$和$K$的值，然后带进方程求出对应的$Q^{*}$

### 2、驱动方程

那么，怎么才能确定$J$和$K$的值呢？

#### 2.1 $FF_{1}$触发器

首先来看$FF_{1}$ 的$J_{1}$和$K_{1}$：

<img src="https://cdn.jsdelivr.net/gh/ZDaneel/cloudimg@main/img/202201031851574.png" style="zoom:50%;" />

<center>图3 FF1的驱动方程确定</center>

用红线标出的电路与$FF_{1}$ 的$J_{1}$和$K_{1}$相关，可以很清晰看到，$J_{1}$和$K_{1}$的信号来自$FF_{3}$的$\bar{Q}$，而此处的$\bar{Q}$是上面的$Q_{3}$取反值，于是我们可以得到这个式子：
$$
J_{1}=K_{1}=\bar{Q_{3}}
$$
这就是$J_{1}$和$K_{1}$的驱动方程

#### 2.2 $FF_{2}$触发器

同理，我们来看$FF_{2}$ 的$J_{2}$和$K_{2}$：

<img src="https://cdn.jsdelivr.net/gh/ZDaneel/cloudimg@main/img/202201031846090.png" alt="截屏2022-01-03 下午6.37.49" style="zoom: 50%;" />

<center>图4 FF2的驱动方程确定</center>

可以看出，$Q_{1}$往三条线路走，$J_{2}$和$K_{2}$都只与$Q_{1}$相关，于是得出式子：
$$
J_{2}=K_{2}=Q_{1}
$$
这就是$J_{2}$和$K_{2}$的驱动方程

#### 2.3 $FF_{3}$触发器

最后，来看一下较为复杂的$FF_{3}$ 的$J_{3}$和$K_{3}$：

<img src="https://cdn.jsdelivr.net/gh/ZDaneel/cloudimg@main/img/202201031857765.png" style="zoom:50%;" />

<center>图5 FF3的驱动方程确定</center>

其中的$K_{3}$可以很容易看出是等于$Q_{3}$的，而$J_{3}$则是由$Q_{1}$和$Q_{2}$经过一个与门得到，所以得出式子：

<div>
$$
\begin{aligned}
  & J_{3}=Q_{1}Q_{2} \\
  & K_{3}=Q_{3}\end{aligned}
$$
</div>

这就是$J_{3}$和$K_{3}$的驱动方程

### 3、状态方程

ok，到现在我们得到了每个触发器对应的驱动方程，我们还知道JK触发器的特性方程，接下去一步就是把驱动方程代入特性方程中，具体如下：

#### 3.1 $FF_{1}$触发器

将$J_{1}=K_{1}=\bar{Q_{3}}$代入特性方程$Q_{1}^{*}=J_{1}\bar{Q_{1}}+\bar{K_{1}}Q_{1}$ 

得到：
$$
Q_{1}^{*}=\bar{Q_{3}}\bar{Q_{1}}+Q_{3}Q_{1}=Q_{3}\odot Q_{1}
$$
其中的$\odot$是同或的意思，化成这个形式方便接下去的运算，得不到$Q_{3}\odot Q_{1}$也没有关系，用$\bar{Q_{3}}\bar{Q_{1}}+Q_{3}Q_{1}$也能往下做

#### 3.2 $FF_{2}$触发器

将$J_{2}=K_{2}=Q_{1}$代入特性方程$Q_{2}^{*}=J_{2}\bar{Q_{2}}+\bar{K_{2}}Q_{2}$

得到：
$$
Q_{2}^{*}=Q_{1}\bar{Q_{2}}+\bar{Q_{1}}Q_{2}=Q_{2}\oplus Q_{1}
$$
其中的$\oplus$是异或的意思，也是为了方便接下去的运算，得不到也没关系，用$Q_{1}\bar{Q_{2}}+\bar{Q_{1}}Q_{2}=Q_{2}\oplus Q_{1}$也能往下做

#### 3.3 $FF_{3}$触发器

将$J_{3}=Q_{1}Q_{2}$ 和$K_{3}=Q_{3}$代入特性方程$Q_{3}^{*}=J_{3}\bar{Q_{3}}+\bar{K_{3}}Q_{3}$

得到：
$$
Q_{3}^{*}=Q_{1}Q_{2}\bar{Q_{3}}+\bar{Q_{3}}Q_{3}=\bar{Q_{3}}Q_{2}Q_{1}
$$
调整下标的方向也是为了后续的计算，这个地方看情况灵活调整

### 4、输出方程

最后要写一个方程，就是输出变量$Y$对应的方程，如图所示：

<img src="https://cdn.jsdelivr.net/gh/ZDaneel/cloudimg@main/img/202201031952459.png" style="zoom:50%;" />

<center>图6 输出方程确定</center>

很容易可以得到：
$$
Y=Q_{3}
$$

## 三、方程都写出来了，但到底有啥用？

### 1、状态表

我们已经得到了以下的三个状态方程和一个输出方程，接下去就是列出状态表

<div>
$$
\begin{aligned}
& Q_{1}^{*}=Q_{3}\odot Q_{1} \\
& Q_{2}^{*}=Q_{2}\oplus Q_{1} \\
& Q_{3}^{*}=\bar{Q_{3}}Q_{2}Q_{1} \\
& Y=Q_{3}
\end{aligned}
$$
</div>

首先画出状态表的初始情况：

| $Q_{3}$ | $Q_{2}$ | $Q_{1}$ | $Q_{3}^{*}$ | $Q_{2}^{*}$ | $Q_{1}^{*}$ | $Y$  |
| :-----: | :-----: | :-----: | :---------: | :---------: | :---------: | :--: |
|    0    |    0    |    0    |             |             |             |      |
|    0    |    0    |    1    |             |             |             |      |
|    0    |    1    |    0    |             |             |             |      |
|    0    |    1    |    1    |             |             |             |      |
|    1    |    0    |    0    |             |             |             |      |
|    1    |    0    |    1    |             |             |             |      |
|    1    |    1    |    0    |             |             |             |      |
|    1    |    1    |    1    |             |             |             |      |

<center>表1 初始状态表</center>

然后根据$Q_{3}$、$Q_{2}$、$Q_{1}$的值，使用状态方程和输出方程计算出后面四列对应的值，得出：

| $Q_{3}$ | $Q_{2}$ | $Q_{1}$ | $Q_{3}^{*}$ | $Q_{2}^{*}$ | $Q_{1}^{*}$ | $Y$  |
| :-----: | :-----: | :-----: | :---------: | :---------: | :---------: | :--: |
|    0    |    0    |    0    |      0      |      0      |      1      |  0   |
|    0    |    0    |    1    |      0      |      1      |      0      |  0   |
|    0    |    1    |    0    |      0      |      1      |      1      |  0   |
|    0    |    1    |    1    |      1      |      0      |      0      |  0   |
|    1    |    0    |    0    |      0      |      0      |      0      |  1   |
|    1    |    0    |    1    |      0      |      1      |      1      |  1   |
|    1    |    1    |    0    |      0      |      1      |      0      |  1   |
|    1    |    1    |    1    |      0      |      0      |      1      |  1   |

<center>表2 状态表</center>

注意：

- 一定要看好状态方程里下标所对应的值，容易弄混
- 要对基础的逻辑运算有一定的了解：与、或、非、同或、异或

### 2、状态图

得到了真值表就可以画出对应的状态图

首先要确定每个状态对应的状态变量，如下图所示（**注意下标！**）

<img src="https://cdn.jsdelivr.net/gh/ZDaneel/cloudimg@main/img/202201032018844.png" alt="截屏2022-01-03 下午8.18.02" style="zoom:50%;" />

<center>图7 状态变量</center>

如表3所示，$Q_{3}Q_{2}Q_{1}$对应的是状态表的左半部分，从000开始，箭头指向右半部分，即001，画出的图如图8所示

| $Q_{3}$ | $Q_{2}$ | $Q_{1}$ | $Q_{3}^{*}$ | $Q_{2}^{*}$ | $Q_{1}^{*}$ |
| :-----: | :-----: | :-----: | :---------: | :---------: | :---------: |
|    0    |    0    |    0    |      0      |      0      |      1      |

<center>表3 状态表第1行</center>

<img src="https://cdn.jsdelivr.net/gh/ZDaneel/cloudimg@main/img/202201032023468.png" alt="截屏2022-01-03 下午8.23.18" style="zoom:50%;" />

<center>图8 从000指向001</center>

接下去的一步和上一步有很大关联，从001开始，即001是状态表的左半部分，指向右半部分的010，画的图如图9所示

| $Q_{3}$ | $Q_{2}$ | $Q_{1}$ | $Q_{3}^{*}$ | $Q_{2}^{*}$ | $Q_{1}^{*}$ |
| :-----: | :-----: | :-----: | :---------: | :---------: | :---------: |
|    0    |    0    |    1    |      0      |      1      |      0      |

<center>表4 状态表第2行</center>

<img src="https://cdn.jsdelivr.net/gh/ZDaneel/cloudimg@main/img/202201032033737.png" alt="截屏2022-01-03 下午8.33.24" style="zoom:50%;" />

<center>图9 从001指向010</center>

以此类推，直到回到000：

<img src="https://cdn.jsdelivr.net/gh/ZDaneel/cloudimg@main/img/202201032036550.png" alt="截屏2022-01-03 下午8.36.25" style="zoom:50%;" />

<center>图10 回到000</center>

此时状态表里还剩下一些没有用到的值：

| $Q_{3}$ | $Q_{2}$ | $Q_{1}$ | $Q_{3}^{*}$ | $Q_{2}^{*}$ | $Q_{1}^{*}$ | $Y$  |
| :-----: | :-----: | :-----: | :---------: | :---------: | :---------: | :--: |
|    1    |    0    |    1    |      0      |      1      |      1      |  1   |
|    1    |    1    |    0    |      0      |      1      |      0      |  1   |
|    1    |    1    |    1    |      0      |      0      |      1      |  1   |

<center>表5 剩下的状态表</center>

右半部分$Q_{3}^{*} Q_{2}^{*} Q_{1}^{*}$对应的值就是图10里已经画好的值。依然是左半部分指向右半部分，即101指向011、110指向010、111指向001，如图11所示，得到最终的状态图

<img src="https://cdn.jsdelivr.net/gh/ZDaneel/cloudimg@main/img/202201032042885.png" alt="截屏2022-01-03 下午8.42.12" style="zoom:50%;" />

<center>图11 状态图</center>

## 四、收尾

一般情况下，就到了最后一步，即判断电路的逻辑功能，由状态图和状态表可知，这是一个**能自启动的五进制计数器**，$Y$为**进位输出端**

至于如何判断出来的，以我目前的知识难以作出令人信服的解释。看到类似的状态图，就知道是能自启动的N进制计数器

涉及到输入输出的分析，可能还要用到时序图（如书本P266的例题10.2）

如果出卷合理，逻辑功能这部分就是用来做区分的，估计分值也不会占太多

一定要把前面的基础分数拿到手，这部分是可以通过练习从而掌握的

## 五、常见触发器特性方程

### 1、基本RS触发器

$$
Q^{*}=RQ+\bar{S}
$$

**约束条件：**
$$
R+S=1
$$

### 2、JK触发器（主从或边沿）

$$
Q^{*}=J\bar{Q}+\bar{K}Q
$$

### 3、边沿D触发器

$$
Q^{*}=D
$$

### 4、T触发器

$$
Q^{*}=T\bar{Q}+\bar{T}Q
$$

> 参考郝晓丽的《电路与电子技术基础》P264-265
>
> 使用[typora](https://typora.io/)进行书写
>
> 图像使用[draw.io](https://drawio-app.com/)进行绘制
>
> 公式由Katex进行渲染
